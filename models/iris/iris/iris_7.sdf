<?xml version='1.0'?>
<sdf version="1.6">
    <model name="iris_7"> <!-- 0 + UAV_ID -->
        <include>
            <uri>model://iris/iris_base</uri>
        </include>
        <plugin name='mavlink_interface' filename='libgazebo_mavlink_interface.so'>
          <robotNamespace/>
          <imuSubTopic>/imu</imuSubTopic>
          <gpsSubTopic>/gps</gpsSubTopic>
          <magSubTopic>/mag</magSubTopic>
          <baroSubTopic>/baro</baroSubTopic>
          <mavlink_addr>INADDR_ANY</mavlink_addr>
          <mavlink_udp_port>14567</mavlink_udp_port><!-- 14560 + UAV_ID -->
          <mavlink_tcp_port>4567</mavlink_tcp_port><!-- 4560 + UAV_ID -->
          <serialEnabled>false</serialEnabled>
          <serialDevice>/dev/ttyACM0</serialDevice>
          <baudRate>921600</baudRate>
          <qgc_addr>INADDR_ANY</qgc_addr>
          <qgc_udp_port>14550</qgc_udp_port>
          <sdk_addr>INADDR_ANY</sdk_addr>
          <sdk_udp_port>14540</sdk_udp_port>
          <hil_mode>false</hil_mode>
          <hil_state_level>false</hil_state_level>
          <vehicle_is_tailsitter>false</vehicle_is_tailsitter>
          <send_vision_estimation>true</send_vision_estimation>
          <send_odometry>false</send_odometry>
          <enable_lockstep>true</enable_lockstep>
          <use_tcp>true</use_tcp>
          <motorSpeedCommandPubTopic>/gazebo/command/motor_speed</motorSpeedCommandPubTopic>
          <control_channels>
            <channel name='rotor1'>
              <input_index>0</input_index>
              <input_offset>0</input_offset>
              <input_scaling>1000</input_scaling>
              <zero_position_disarmed>0</zero_position_disarmed>
              <zero_position_armed>100</zero_position_armed>
              <joint_control_type>velocity</joint_control_type>
            </channel>
            <channel name='rotor2'>
              <input_index>1</input_index>
              <input_offset>0</input_offset>
              <input_scaling>1000</input_scaling>
              <zero_position_disarmed>0</zero_position_disarmed>
              <zero_position_armed>100</zero_position_armed>
              <joint_control_type>velocity</joint_control_type>
            </channel>
            <channel name='rotor3'>
              <input_index>2</input_index>
              <input_offset>0</input_offset>
              <input_scaling>1000</input_scaling>
              <zero_position_disarmed>0</zero_position_disarmed>
              <zero_position_armed>100</zero_position_armed>
              <joint_control_type>velocity</joint_control_type>
            </channel>
            <channel name='rotor4'>
              <input_index>3</input_index>
              <input_offset>0</input_offset>
              <input_scaling>1000</input_scaling>
              <zero_position_disarmed>0</zero_position_disarmed>
              <zero_position_armed>100</zero_position_armed>
              <joint_control_type>velocity</joint_control_type>
            </channel>
            <channel name='rotor5'>
              <input_index>4</input_index>
              <input_offset>1</input_offset>
              <input_scaling>324.6</input_scaling>
              <zero_position_disarmed>0</zero_position_disarmed>
              <zero_position_armed>0</zero_position_armed>
              <joint_control_type>velocity</joint_control_type>
              <joint_control_pid>
                <p>0.1</p>
                <i>0</i>
                <d>0</d>
                <iMax>0.0</iMax>
                <iMin>0.0</iMin>
                <cmdMax>2</cmdMax>
                <cmdMin>-2</cmdMin>
              </joint_control_pid>
              <joint_name>zephyr_delta_wing::propeller_joint</joint_name>
            </channel>
            <channel name='rotor6'>
              <input_index>5</input_index>
              <input_offset>0</input_offset>
              <input_scaling>0.524</input_scaling>
              <zero_position_disarmed>0</zero_position_disarmed>
              <zero_position_armed>0</zero_position_armed>
              <joint_control_type>position</joint_control_type>
              <joint_name>zephyr_delta_wing::flap_left_joint</joint_name>
              <joint_control_pid>
                <p>10.0</p>
                <i>0</i>
                <d>0</d>
                <iMax>0</iMax>
                <iMin>0</iMin>
                <cmdMax>20</cmdMax>
                <cmdMin>-20</cmdMin>
              </joint_control_pid>
            </channel>
            <channel name='rotor7'>
              <input_index>6</input_index>
              <input_offset>0</input_offset>
              <input_scaling>0.524</input_scaling>
              <zero_position_disarmed>0</zero_position_disarmed>
              <zero_position_armed>0</zero_position_armed>
              <joint_control_type>position</joint_control_type>
              <joint_name>zephyr_delta_wing::flap_right_joint</joint_name>
              <joint_control_pid>
                <p>10.0</p>
                <i>0</i>
                <d>0</d>
                <iMax>0</iMax>
                <iMin>0</iMin>
                <cmdMax>20</cmdMax>
                <cmdMin>-20</cmdMin>
              </joint_control_pid>
            </channel>
            <channel name='rotor8'>
              <input_index>7</input_index>
              <input_offset>0</input_offset>
              <input_scaling>0.524</input_scaling>
              <zero_position_disarmed>0</zero_position_disarmed>
              <zero_position_armed>0</zero_position_armed>
              <joint_control_type>position</joint_control_type>
            </channel>
          </control_channels>
        </plugin>
    </model>
</sdf>
